2.1 知识图谱构建方法
知识图谱主要由若干实体对和关系构成的三元组<ex，r，e2>组成，ex、ex 分别为实体，r表示实体之间的关系，如“<中国移动，股票代码，00941>”。知识图谱的构建主要分为三个过程：实体识别、关系抽取和知识融合。
  2.1.1  实体识别
    知识图谱构建中的实体识别和自动问答方法中的实体识别任务一致，从非结构化的文本中识别出蕴含信息的特定类型的实体，例如金融领域里的公司、人物、产品、销售额、日期等。
    实体识别任务采用精确匹配的原则来判断一个实体能否被正确地识别出来，识别过程包括实体边界识别和实体类型确定两部分，即实体的描述边界判断正确且实体的类型标记正确。实体识别的错误类型主要有三种，一种是文本的边界预测错误但其包含的实体词和实体类型标记是正确的，一种是文本边界预测正确但实体类型标记错误，还有一种是实体的边界和实体的类型全部标记错误。
    实体识别通常采用以下几种方法：（1）基于规则的方法：利用人工编写规则，通过文本与规则的匹配来识别出实体词；（2）基于机器学习结合特征模板的方法：NER任务可以通过机器学习的方法转化成序列标注问题。常用的模型包括隐马尔科夫模型（HMM）、条件随机场（CRF）等，通过定义特征模板结合CRF模型进行序列标注的训练，通过维特比解码来得到最优的标记序列：（3）基于神经网络的方法：同样将NER作为一个序列标注任务处理，首先将文本转换为对应的语义向量，输入到某个神经网络中（如BERT、LSTM等），用神经网络学习自动提取特征，最后通过接入CRF模型层来完成序列标注。在具体研究中，王宁等《通过规则及知识库匹配方式实现了金融新闻中的公司名抽取，在金融领域实体识别方面有不错表现；IIuang等l--提出使用双向长短期记忆网络（Bi-LSTM）接入条件随机场（CRF）的方式实现句子级别的标签预测，在命名实体识别任务上取得了不错的效果，被广泛应用。
  2.1.2  关系抽取
    关系抽取（Relation Extraction.RE）主要目标是从给定的一段自然语言文本之中，抽取出目标实体之间的关系。关系抽取任务通常置于实体识别任务之后，实体识别将文本中的实体信息抽取后，实体识别方法需要围绕给定实体，在文本信息中捕获实体之间蕴含的关系，本质上，RE任务是一个多分类任务。
    关系抽取技术被广泛应用于构建知识图谱任务中。目前解决实体关系抽取问题可以分为流水线（Pipelined）方法和联合抽取（Joint）两种方法。
    流水线方法指的是首先通过实体识别提取出实体，然后再识别这些实体之间的关系，这种方式是一个分离的框架，使得实体识别与关系分类两个子任务
    易于处理且更加灵活；联合抽取则将模型应用于对实体识别和实体关系抽取任务中进行联合学习。与流水线方法不同，联合学习模型是利用单个神经网络的端到端模型同时实现实体识别和关系抽取任务，将实体与关系一起抽取出来。
  2.1.3  知识融合
    当知识图谱的数据来源不唯一时，多个知识源内可能包含同一实体描述因此需要进行知识融合，将不同来源的相同实体节点合并为同一节点，使知识图谱更符合现实逻辑关系。
    知识融合过程主要包含实体融合（实体对齐）和属性融合，属性独合的工作较为简单，主要是将同意义属性进行合并，同类型的属性进行语法和数值的规范，如日期格式、金融单位等等。
    实体融合则相对较为复杂，主要目标是判断不同数据源中的2个实体是否指向了真实世界中的同一对象，将相同的对象进行合并，降低知识图谱的冗余度，使知识图谱的实体描述更加准确全面。实体融合的最大挑战是如何判断不同数据源的两个实体实际上在描述同一对象。在学术研究中，通常采用“实体相似度”来量化两个实体间的相似程度，当实体相似度越大，则两个实体更接近于描述同一现实对象；反之，实体相似度越小，则两个实体越独立，描述同一现实对象的可能性越小。近年来关于实体对齐的研究也着眼于如何设计更合理的实体相似度算法，使实体相似度描述更为准确。
    现有的实体对齐算法可分为两类：一类是基于概率模型的实体对齐方法另一类是基于机器学习的实体对齐方法。基于传统概率模型对齐方法着重考虑实体对应属性的相似性，主要通过属性的相似程度对实体对进行评分，将实体匹配问题转变为一种分类问题，目前大量的实体对齐相关研究都以此方法为基础，本文在知识融合过程中也借鉴了这种对齐方法。该方法的直观思路是加和两个实体所有匹配属性的相似度评分，之后设置2个阈值Slaw和Shigh，当总相似度评分sim≥5h1gh时，认为两个实体匹配：当评分stow<sim<sugh时，认为两个实体可能匹配，此时需要人工加以判断；当评分sim<stow时，则认为两个实体不匹配。属性相似度可以由编辑距离或余弦相似度计算得出，不同属性的权重也可以通过 TF-IDF 等方式统计计算，具体计算方式可以根据数据集的具体情况进行设计；基于机器学习的实体对齐方法则将实体对齐视为二分类问题，通过预先标注部分实体对作为训练数据，训练分类模型，之后使用模型对实际数据进行预测分类。



2.2 基于知识图谱的自动问答方法
  2.2.1 基于模板匹配的问答方法
  基于模板匹配的问答方法属于比较传统的自动问答方法。该方法通过提前构建一组模板参数，形成问题的查询表达式，对问题文本进行规则匹配。具体来说，基于模板匹配的问答方法使用建立好的模板对文本内容进行匹配，对于匹配的问题，通过模板预设的映射格式，将问题文本中的对应内容映射到相应的变量中，例如对于模板"A的B是多少"可以匹配问题"中国移动的股票代码是多少"，此时"中国移动"被赋予变量A，"股票代码"被赋予变量B，之后按照模板映射的数据查询语言构造对应的查询表达式，完成数据查询，返回问题答案。可以看出，基于规则模板的方法不涉及对语句语义的分析，只需要通过预设的问题模板对问题文本逐一匹配，即可抽取出问题的核心实体和目标关系，在知识图谱中查询相关数据，返回查询结果。模板可以进行复用，一个模板可以覆盖多个自然语言问题。
基于规则模板的问答方法可以较为准确的获得问题答案，且不涉及任何的计算推理过程，回答响应较快。但是模板建立需要大量的人工投入，且需要根据业务场景的变化不断对模板进行维护，工作量较大。
  2.2.2 基于语义解析的问答方法
  随着神经网络技术的成熟，基于语义解析的问答方法逐渐替代基于模板匹配的问答方法成为主流。基于语义解析的问答方法的核心思想是利用深度学习神经网络模型，让计算机理解自然语言问题的语义，将问题文本转化为模型可以理解和识别的语义表示，再将对应的语义表示转化为查询知识图谱所需的逻辑表达式，通过数据库查询引擎对逻辑表达式执行查询请求，得到最终的查询结果。模型生成的逻辑表达式通常与查询知识图谱所需的查询语言相同，例如如果用Neo4J储存知识图谱，则模型相应输出Cypher查询语句。
基于语义解析的问答方法的核心在于语义解析，其过程一般可以分为三个阶段，分别是：实体识别、关系映射和语义组合。
（1）实体识别
实体识别是自然语言处理相关技术中的一项基础技术，全称为命名实体识别（Named Entity Recognition，NER）。在自动问答方法中，实体识别的任务是将问题文本中的核心实体词抽取出来，这些核心实体词蕴含着问题文本中的有效信息，能够通过一定的映射关系转换为知识库中的特定元素（如实体、关系、属性等）。实体识别任务的核心目标是正确划分出实体描述文本的边界，以及正确分类实体描述的具体类型，为了实现这一任务目标，通常采用“序列标注”的方法来定位文本内的实体，即对文本的每一个词语进行"BIO"标签标注："B-"代表实体起始描述，后接具体的实体类型，例如"B-Company"表示该标注文本为公司实体的起始描述文本："I-"用于标注实体描述的组成文本，后接具体的实体类型，例如"I-Company"表示该单词为实体描述的组成部分，"I-"只会跟在"B-"后面或"I-"后面，不会单独出现；"O"标签表示该单词不属于任何实体。这样，一个实体描述即可由“B-”和连续的“I-”确定，实体类型则为标签所描述的类型。
实体识别任务的难点在于对实体描述边界的正确划分。对于英文文本来说，由于英文天然自带分词特点，NER任务在英文文本的识别较为容易，而在中文文本中，文本间没有明显的词语分隔符，NER 任务很大程度会受到中文分词、语法结构等因素的影响，一旦分词错误很可能导致实体边界无法正确预测。因此，多个中文 NER 方法开始转向基于字的命名实体识别研究【4】，以消除中文分词带来的语义误差。
（2）关系映射
关系映射目标是将自然语言问句中的关系短语描述映射到知识库中相应的关系或属性中。由于自然语言描述变化多样，而知识库的实体、属性的名称是固定不变的，因此需要设计一种关系映射方法，将自然语言描述的文本转化为知识库的规范描述语言，以实现数据查询表达式的构建。
关系映射的解决方法主要有两种。一种是通过预定义的字典进行关系匹配，由于数据字段数量有限，且对于限定领域问答任务来说，特定字段的描述方式是有限的（如员工人数可以描述为"职工"、"工作人数"），因此可以提前构建一个映射字典，对不同字段的不同描述情况进行覆盖，以实现自然语言到知识库字段的映射变换；另一种方式是将关系映射任务视为一个多分类任务，通过分类器对文本描述进行分类，通过神经网络等模型对自然语言描述进行语义理解，判断该描述属于哪一个知识库字段，分类判断的方法可以将自然语言语句上下文等相关语义特征一并融入计算过程，提高模型的分类能力。
（3）语义组合
语义组合是语义解析的最后一步，负责将抽取出的元素组合成对应的查询语句逻辑表达式。对于一些简单的问题，文本中只包含单独实体和简单关系，此时可以将实体直接相连构成查询语句；而对于一些复杂问题，问题描述中可能涉及多个实体以及限定条件，此时则需要考虑文本语义对多个元素进行组合，根据一定的规则生成构建查询语句。
得益于深度学习相关技术的快速发展，越来越多的自动问答方法选择使用深度学习神经网络模型实现语义解析。深度学习神经网络模型拥有较强的语义理解能力和语义表达能力，2018年由Google研究团队提出BERT模型I*2l在多项自然语言处理任务中均取得了最优的成绩。BERT模型是一种预训练模型，采用了大量的数据和深层次的模型来进行语义特征预训练，其模型参数可以被保存并使用于多种下游任务，下游任务在训练时可以从一个更丰富的语义起点出发，提高模型收敛速度与模型训练效果，降低自然语言处理任务训练成本。本文在实现多级决策的自动问答方法时，采用的IE-SQL模型即是以BERT预训练模型作为语义解析模型。
基于语义理解的自动问答方法其优点在于：如果语义解析成功，则能完整识别提问者的提问意图，从而精确地获得相匹配的查询结果。语义解析不再受限于给定的问题句式类型，使得基于语义解析的KBQA方法能够有效应对复杂多变的提问场景，具备较高的鲁棒性。但是基于语义解析的问答方法也存在一定局限：一方面，训练神经网络模型需要一定的标注数据，然而带有标注的数据集非常有限，特别是在限定领域的数据集十分稀少，很大程度上限制了模型的表现能力：另一方面，神经网络模型结构较为复杂，模型计算耗时较长，对于线上业务来说，模型计算所需的时间远大于业务所能容忍的响应时间，深度神经网络模型的实际上线应用面临一定挑战。如何平衡计算效率与计算准确性是自动问答方法需要思考的问题之一。


